import{_ as C,u as V,c as f,r as B,o as n,a as r,b as e,F as S,d as w,k as x,t as _,l as p,v as u,f as g,B as I,p as b,m as D}from"./index-D3L_PKQr.js";const i=c=>(b("data-v-e0796f0a"),c=c(),D(),c),E={class:"page__container"},F=i(()=>e("h1",{class:"page__title"},"Корзина",-1)),N={key:0,class:"cart__message"},U={key:1},O=i(()=>e("p",{class:"page__message"}," Важно! Выдача товара осуществляется в ручном режиме. После того как вы добавите интересующие товары в корзину, заполните персональные данные и оставьте заявку на покупку, мы свяжемся с вами для уточнения деталей, проведения оплаты и согласования сроков выполнения заказа. ",-1)),P={class:"cart__container"},L={class:"cart__item-list"},M=i(()=>e("h2",null,"Товары",-1)),T={class:"cart__total"},$={class:"cart__item-list"},j=i(()=>e("h2",null,"Персональные данные",-1)),q={__name:"CartView",setup(c){const o=V(),m=f(()=>o.cartItems.length>0),a=B({name:"",email:"",phone:""}),d=o.cartItems,v=f(()=>o.cartItems.reduce((l,t)=>l+t.price,0)),k=l=>{const t=o.cartItems[l];o.removeFromCart(t)},y=()=>{if(!m.value)return;const l={name:a.value.name,email:a.value.email,phone:a.value.phone,items:d,totalPrice:v.value};o.sendOrder(l).then(()=>{alert("Заявка успешно отправлена!"),o.clearCart(),a.value={name:"",email:"",phone:""}}).catch(t=>{console.error("Error sending message:",t),alert("Ошибка при отправке заявки")})};return(l,t)=>(n(),r("div",E,[F,m.value?(n(),r("div",U,[O,e("div",P,[e("div",L,[M,(n(!0),r(S,null,w(x(d),(s,h)=>(n(),r("div",{class:"cart__item",key:h},[e("p",null,_(s.name)+" - "+_(s.price)+"₽",1),g(I,{onClick:z=>k(h),title:"Удалить"},null,8,["onClick"])]))),128)),e("div",T,[e("p",null,"Итог: "+_(v.value)+"₽",1)])]),e("div",$,[j,p(e("input",{class:"cart__item-input","onUpdate:modelValue":t[0]||(t[0]=s=>a.value.name=s),type:"text",placeholder:"Имя"},null,512),[[u,a.value.name]]),p(e("input",{class:"cart__item-input","onUpdate:modelValue":t[1]||(t[1]=s=>a.value.phone=s),type:"tel",placeholder:"Телефон"},null,512),[[u,a.value.phone]]),p(e("input",{class:"cart__item-input","onUpdate:modelValue":t[2]||(t[2]=s=>a.value.email=s),type:"email",placeholder:"Почта"},null,512),[[u,a.value.email]]),g(I,{onClick:y,class:"cart__button",title:"Отправить заявку"})])])])):(n(),r("span",N,"Корзина пуста"))]))}},G=C(q,[["__scopeId","data-v-e0796f0a"]]);export{G as default};
